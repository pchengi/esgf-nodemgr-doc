\documentclass[oneside,12pt]{memoir}
\def\mychaplineone{Developer notes for}
\def\mychaplinetwo{ESGF Node Manager}
%\def\mychaplinethree{And Some More...}
\def\myauthone{Prashanth Dwarakanath}
\def\myauthtwo{Sasha Ames}
%\def\myauththree{Torgny Fax\'en}
\def\mypress{Earth Sciences Grid Federation}
\usepackage{chengi}
\def\phname{NM{ }}
\def\vernum{December 2, 2014}
\setcounter{tocdepth}{2}
\thispagestyle{empty}
\titleGM
\chapterstyle{BlueBox}
\pagestyle{mystyle}
\begin{document}
\frontmatter
\hypertarget{mytocmarker}
\tableofcontents
\mainmatter
\setcounter{secnumdepth}{2}
\chapter{Solution Design}
\section{Overview}


\section{Design Considerations}

We are interested in a hierarchical framework for node management rather than a pure p2p.  In this case nodes elect "super-nodes" that perform additional tasks than "member-nodes".  Our goal for scalability is to have a balance of super vs member nodes to ensure that no super-node becomes oversubscribed.  Super-nodes operate at the "project" level.   

A node that serves as the "super-node" for project A can be a member node for project B.  Super-nodes can serve in that role for multiple projects.    Configuring a node for eligibility for selection to become a super node is voluntary, but important for the federation to have an "adequate" number of candidates.

Vetting for a super node. Hand-picked initial super-nodes.  

member nodes pass messages.  

Node manager admin interface.  Allow admins to eg. sign certs, vet nodes,  

\begin{enumerate}
\item
Tree-based communication between super nodes and member nodes to reduce communication overheads, ie. avoid $n^2$ patterns.  We expect a ``wide'' tree with ``few" hops.
\item 
Need to maintain backward compatibility with format of registration.xml etc, to not break existing parsers. 
\end{enumerate}


\section{Breakup of tasks}



\section{System Architecture}
Diagram of the system to go here...\\

\subsection{Components}
We see two major components in this solution.
\begin{enumerate}
\item 
A component which takes care of failure detection, failure handling, leader election, shared state etc.
Apache ZooKeeper seems to be a very promising fit for this role.
\item
A component that serves as a `feeder', to the zookeeper. This would also provide an administrative interface to the node manager. This is the component of the node manager that is meant to be exposed to the federation, and not the ZooKeeper itself. It could be used by local admins, to generate requests for federation membership or certificate signing. It would also allow admins of supernodes to ratify/sign these requests.
metrics collection and query. This component would also be responsible for collection of metrics.
\end{enumerate}

\subsection{Use Case Diagram}
Use case diagram goes here...


\section{Issues and questions}
This is to be a place to list out problems that need to be handled.
\begin{enumerate}
\item
do we use zookeeper?

to what extent can we rely if we do,  what do we need to implement for the nm


Is zookeeper a fit for management?
\item
can zookeeper manage group-level access control?
\item
Deal with "spoofed" node; ensure relayed information is legitimate. 


\end{enumerate}
\hypertarget{mymarker}{}
\printindex
\end{document}
